## Carebot Project - Backend & Infrastructure

### 개요

Carebot Project는 독거노인을 위한 스마트 생활 도우미 서비스입니다. 이 서비스는 단순한 대화 상대를 넘어, 일상 속에서 동반자가 되어주고, 긴급한 상황에서는 신속한 도움을 제공하는 역할을 합니다.

또한, Carebot은 가족 및 요양보호사가 독거노인의 생활 상태를 원격으로 모니터링할 수 있도록 지원합니다. 대화 내역을 바탕으로 감정 및 심리 상태를 분석하고, 환경 및 활동 데이터를 수집하여 위험 요소를 감지함으로써 보다 안전한 생활을 돕습니다.

이러한 서비스를 원활하게 제공하기 위해 **Backend 서비스**와 **Infrastructure**를 효율적으로 설계하였습니다.

---

## System Structure

![최종서비스](/uploads/c224e30672147ae64917ff9bf1bd0ab6/최종서비스.png)

## Infrastructure

1. **Docker 기반의 컨테이너화**
    - 모든 서비스를 Docker를 이용해 컨테이너화하여 유지보수를 용이하게 하고, 한 서비스의 문제가 다른 서비스에 영향을 주지 않도록 구성하였습니다.
    - API Server, AI Server, Image Server, Main Web Page, Sub Web Page를 각각의 컨테이너로 운영합니다.

2. **CI/CD 자동화**
    - GitLab에 코드가 Push되면 Webhook을 통해 Jenkins에게 알림을 전달합니다.
    - Jenkins는 수정된 Repository를 Clone하여 Docker Image를 빌드하고, 컨테이너를 실행하는 과정을 자동으로 수행합니다.

3. **컨테이너 관리 도구 활용**
    - **Portainer**를 이용해 실행 중인 컨테이너의 상태를 모니터링하며, 재시작 및 중지 작업을 간편하게 수행할 수 있습니다.
    - **Dozzle Logger**를 활용하여 각 컨테이너의 실시간 로그를 확인하고, 발생하는 문제를 신속하게 파악하여 버그를 수정합니다.

4. **Reverse Proxy 구성**
    - **Nginx**를 역방향 프록시로 사용하여 사용자 서비스와 내부 개발 도구를 연결합니다.
    - Port 번호가 아닌 **서브 도메인**을 이용하여 서비스 접근성을 개선하였습니다.

5. **보안 강화**
    - 모든 서비스는 **HTTPS 프로토콜**을 이용하여 데이터 전송 중 패킷 가로채기를 방지합니다.

---

## Backend

1. **FastAPI 기반 서버 개발**
    - 모든 서버는 Python + FastAPI로 개발되어 있으며, 빠른 응답성과 비동기 처리를 지원합니다.

2. **서버 역할 분리**
    - **API Server**: 사용자 인증, 데이터 관리 및 비즈니스 로직을 처리합니다.
    - **AI Server**: 외부 API를 호출하여 AI 모델을 실행하며, API 서버와 분리하여 외부 요인으로 인한 문제 발생 시 API 서버의 안정성을 유지합니다.
    - **Image Server**: 이미지 처리 작업을 담당하여 API 서버와 분리하여 성능 저하를 방지합니다.

3. **세션 기반 인증 시스템**
    - API 서버는 로그인 후 발급되는 세션을 기반으로 인증된 사용자만 접근할 수 있도록 구현되었습니다.

4. **데이터베이스 및 ORM 사용**
    - **MariaDB**를 사용하여 데이터를 저장하며, SQL-Alchemy를 활용한 ORM을 이용해 데이터베이스를 관리합니다.

---

## 결론

Carebot Project의 백엔드와 인프라는 **모듈화된 컨테이너 아키텍처, 자동화된 배포 시스템, 강화된 보안 정책**을 통해 원활한 서비스를 제공하도록 설계되었습니다. 이러한 구조를 통해 시스템 확장성과 안정성을 확보하고, 빠른 장애 대응이 가능합니다.
